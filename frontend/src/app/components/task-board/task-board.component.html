<app-navbar></app-navbar>

<div class="layout">
  <!-- optional: add <app-sidebar> here if you want a visible sidebar -->
  <main class="content">
    <div class="task-board">
      <h1 class="board-title">Task Board</h1>

      <div class="columns">
        <div class="column" *ngFor="let s of statuses" [attr.data-key]="s.toString()">
          <h3>{{ s }}</h3>

          <div
            cdkDropList
            [id]="s.toString()"
            class="drop-list"
            [cdkDropListData]="tasksByStatus[s.toString()]"
            [cdkDropListConnectedTo]="connectedTo(s)"
            (cdkDropListDropped)="drop($event, s)"
          >
            <div
              class="task-card"
              *ngFor="let t of tasksByStatus[s.toString()]; let i = index"
              cdkDrag
              (cdkDragStarted)="onDragStarted()"
              (cdkDragEnded)="onDragEnded()"
              (click)="onCardClick(t)"
            >
              <div class="card-header" cdkDragHandle>
                <div class="title-left">
                  <strong class="task-title">{{ t.title }}</strong>
                </div>
                <div class="card-side">
                  <span class="meta" *ngIf="t.dueDate">{{ t.dueDate | date : 'shortDate' }}</span>
                </div>
              </div>

              <div class="card-body">{{ t.description }}</div>

              <div class="card-footer">
                <span class="badge">$450</span>
                <span class="badge">Urgent</span>
                <span class="status-dot urgent-dot" title="priority"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
